(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-000d72e9"],{"038c":function(t,e,s){"use strict";s("404c")},"2fb6":function(t,e,s){},"404c":function(t,e,s){},"4c2d":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"score",style:{"background-position-y":`-${t.posY}px`}})},a=[],o={name:"rankstar",props:{score:{type:Number}},computed:{posY:function(){let t=0,e=this.score;return t=e>9?0:e>8?11:e>7?22:e>6?33:e>5?44:e>4?55:e>3?66:e>2?77:e>1?88:99,t}}},r=o,n=(s("86ab"),s("2877")),c=Object(n["a"])(r,i,a,!1,null,"009d837d",null);e["a"]=c.exports},"5b98":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-container"},[e("div",{staticClass:"left-content"},[e("movieInfo"),e("movieRecomende"),e("movieComent")],1)])},a=[],o=function(){var t=this,e=t._self._c;return e("div",[t.loading?t._e():e("div",[e("el-skeleton",{attrs:{row:1,animated:""}})],1),t.detailData.id?e("div",{staticClass:"movie-info"},[e("h1",{staticClass:"title"},[t._v(t._s(t.detailData.title))]),e("div",{staticClass:"desc-content"},[e("img",{staticClass:"mv-img",attrs:{src:t.detailData.posterURL}}),e("div",{staticClass:"mv-desc"},[e("p",[t._v(" 导演:"),e("span",{staticClass:"it"},[t._v(t._s(t.detailData.director))])]),e("p",[t._v(" 主演: "),t._l(t.actorsList.short,(function(s,i){return e("span",{key:i,staticClass:"it"},[t._v(" "+t._s(s)+" "),i!=t.actorsList.short.length-1?[t._v(" / ")]:t._e()],2)})),e("a",{staticClass:"more-a"},[t.actorsList.isShowMore?e("span",{staticClass:"more-actors",on:{click:t.expand}},[t._v("更多...")]):t._e()])],2),e("p",[t._v(" 类型:"),e("span",{staticClass:"it"},[t._v(t._s(t.detailData.types.join(" / ")))])]),e("p",[t._v(" 语言:"),e("span",{staticClass:"it"},[t._v(t._s(t.detailData.language))])]),e("p",[t._v(" 发行日期:"),e("span",{staticClass:"it"},[t._v(t._s(t.detailData.issue))])]),e("p",[t._v(" 拍摄日期:"),e("span",{staticClass:"it"},[t._v(t._s(t.detailData.shoot))])]),e("p",[t._v(" 片长:"),e("span",{staticClass:"it"},[t._v(t._s(t.detailData.timelong)+"(min)")])])]),e("div",{staticClass:"rank-video"},[e("div",{staticClass:"mv-rank"},[e("div",{staticClass:"rank-title"},[t._v("评分")]),e("div",{staticClass:"rank-score"},[e("div",{staticClass:"score"},[e("strong",{staticClass:"num"},[t._v(t._s(null==t.detailData.score?0:t.detailData.score))])]),e("div",{staticClass:"score-star"},[e("rankstar",{staticClass:"rankstar",attrs:{score:2*t.detailData.score}}),e("div",{staticClass:"score-comment"},[e("a",{attrs:{href:"#"}},[t._v(t._s(t.detailData.rateCount))]),t._v("人评价 ")])],1)]),e("div",{staticClass:"better-conent"},t._l([],(function(t){return e("div",{key:t.index,staticClass:"rate-item"})})),0)]),t.videoList.length?e("div",{staticClass:"mv-video"},[e("div",{staticClass:"video-title"},[t._v("播放链接:")]),t._l(t.shortVideoList,(function(s,i){return e("div",{key:i},[e("div",{staticClass:"video-item"},[e("a",{on:{click:function(e){return t.playVideo(s)}}},[t._v(t._s(s.name))])])])})),null!=t.videoList&&t.videoList.length>2?e("div",{staticClass:"move-video-item"},[e("span",{staticClass:"more-video",on:{click:t.showMoreVideo}},[t._v("查看更多...")])]):t._e()],2):t._e()])]),e("div",{staticClass:"opera-box",on:{mouseleave:t.resetScore}},[e("div",[t._v("请评分：")]),e("div",{staticClass:"rankstar"},t._l(t.starList.list||[],(function(s,i){return e("div",{key:i,class:["star-item",s.state],on:{mouseenter:function(e){return t.changeScore(i)},click:function(e){return t.sendScore(i)}}})})),0),e("div",[e("img",{attrs:{src:"https://img1.doubanio.com/f/shire/5bbf02b7b5ec12b23e214a580b6f9e481108488c/pics/add-review.gif"}}),e("a",{staticClass:"comment-link",attrs:{href:"javascript:void(0)"},on:{click:t.goPublish}},[t._v(" 写影评")])])]),e("div",{staticClass:"intro"},[e("h2",{staticClass:"intro-title"},[t._v(t._s(t.detailData.title)+"的剧情简介· · · · ·")]),e("div",{staticClass:"intro-content"},[t._v(" "+t._s(t.detailData.descri?t.detailData.descri:"暂无简介...")+" ")])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.videoIsShow,expression:"videoIsShow"}],staticClass:"video_con",staticStyle:{display:"none"}},[e("video",{ref:"videoPlayer",attrs:{src:t.videoUrl,controls:"controls"}}),e("div",{staticClass:"mask",on:{click:t.hide}})]),e("el-dialog",{attrs:{title:"更多资源",visible:t.isShowMoreVideo,width:"20%"},on:{"update:visible":function(e){t.isShowMoreVideo=e},close:t.closeMoreVideoList}},t._l(t.videoList,(function(s,i){return e("div",{key:i},[e("div",{staticClass:"video-item"},[e("a",{on:{click:function(e){return t.playVideo(s)}}},[t._v(t._s(s.name))])])])})),0)],1)},r=[],n=s("4c2d"),c=s("fc91"),l=s("dab6"),d=s("2f62"),u={name:"movieInfo",computed:{...Object(d["b"])({user:function(){return this.$store.state.user}})},components:{rankstar:n["a"]},methods:{goPublish(){this.user.token?this.$router.push("/publish?id="+this.id):(this.$message.error("请先登录"),this.$router.push({name:"login",query:{redirect:this.$router.currentRoute.fullPath}}))},async getDetail(t){this.loading=!1,await Object(c["c"])(t).then(t=>{200===t.code?(this.detailData=t.obj,this.$store.commit("setTitle",this.detailData.title),this.actorsList.orgin=this.detailData.actors,this.actorsList.short=this.actorsList.orgin.slice(0,3),this.actorsList.isShowMore=this.actorsList.orgin.length>3):this.$message.error(t.message)}),this.loading=!0},expand(){this.actorsList.short=this.actorsList.orgin,this.actorsList.isShowMore=!1},playVideo(t){0==t.type?(this.isShowMoreVideo=!1,this.videoIsShow=!0,this.videoUrl=t.url):1==t.type&&(this.isShowMoreVideo=!1,window.open(t.url,"_blank"))},changeScore(t){let e=[];this.starList.list.forEach((s,i)=>{s.state=i<=t?"full":"normal",e.push({...s})}),this.starList.list=e},hide(){this.$refs.videoPlayer.pause(),this.videoUrl=null,this.videoIsShow=!1},sendScore(t){this.user.token?(t+=1,Object(l["c"])(this.id,this.user.id,t).then(e=>{200===e.code?(0==this.score&&(this.detailData.rateCount=this.detailData.rateCount+1),this.score=t,this.resetScore()):this.$message.error(e.message)})):(this.$message.error("请先登录"),this.$router.push({name:"login",query:{redirect:this.$router.currentRoute.fullPath}}))},async getScore(){this.user.token&&Object(l["b"])(this.id,this.user.id).then(t=>{200===t.code?(this.score=t.obj,this.resetScore()):this.$message.error(t.message)})},resetScore(){let t=[],e=this.score-1;this.starList.list.forEach((s,i)=>{s.state=i<=e?"full":"normal",t.push({...s})}),this.starList.list=t},showMoreVideo(){this.isShowMoreVideo=!0},closeMoreVideoList(){this.isShowMoreVideo=!1},async getVideo(t){await Object(c["g"])(t).then(t=>{200===t.code?(this.videoList=null==t.obj?[]:t.obj,this.shortVideoList=this.videoList.slice(0,2)):this.$message.error(t.message)})}},created(){this.getDetail(this.id),this.getScore(),this.getVideo(this.id)},data(){return{id:this.$route.params.id,score:0,loading:!1,detailData:{},isShowMoreVideo:!1,actorsList:{orgin:[],short:[],isShowMore:!0},starList:{list:new Array(5).fill({state:"normal"})},videoList:[],shortVideoList:[],videoIsShow:!1,videoUrl:""}},watch:{"$route.params":{handler(t){this.id=t.id,this.getDetail(t.id)},immediate:!0}}},h=u,v=(s("d653"),s("2877")),m=Object(v["a"])(h,o,r,!1,null,"6282c7a3",null),f=m.exports,g=function(){var t=this,e=t._self._c;return t.detailData.list.length?e("div",[e("div",{staticClass:"movie-recomende"},[e("h2",{staticClass:"intro-title"},[t._v(t._s(t.title)+" 相关电影")])]),e("div",{staticClass:"scroll-warp"},[e("div",{staticClass:"scroll-content"},t._l(t.detailData.list,(function(s){return e("div",{key:s.id,staticClass:"movie-item"},[e("el-tooltip",{attrs:{content:s.name,placement:"top"}},[e("img",{staticClass:"movie-img",attrs:{src:s.head},on:{click:function(e){return t.goOtherMovie(s.id)}}})]),e("div",{staticClass:"movie-name one-line"},[t._v(t._s(s.name))]),e("div",{staticClass:"movie-language one-line"},[t._v(t._s(s.language))])],1)})),0)])]):t._e()},p=[],_={name:"movieRecomende",components:{movieInfo:f},methods:{async getDetail(t){await Object(c["d"])(t).then(t=>{200===t.code?this.detailData.list=t.obj:this.$message.error(t.message)})},goOtherMovie(t){this.$router.push({path:"/movie/"+t}),location.reload()}},computed:{title:function(){return this.$store.state.title}},created(){this.id=this.$route.params.id,this.getDetail(this.id)},data(){return{id:null,detailData:{list:[]}}},watch:{"$route.params":{handler(t){this.id=t.id,this.getDetail(t.id)},immediate:!0}}},b=_,C=(s("038c"),Object(v["a"])(b,g,p,!1,null,"be76c9b6",null)),j=C.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"movie-coments"},[e("h2",{staticClass:"intro-title"},[t._v(t._s(t.title)+" 的影评 ("+t._s(t.count)+")")]),e("div",{staticClass:"scroll-warp"},t._l(t.detailData,(function(s,i){return e("div",{key:i,staticClass:"comment-item"},[e("div",{staticClass:"top-content"},[e("img",{staticClass:"avatar",attrs:{src:s.userImg}}),e("span",{staticClass:"nickname"},[e("router-link",{attrs:{to:"/user/"+s.id}},[t._v(t._s(s.name))])],1),s.rating?e("div",{staticClass:"rankstar"},[e("rankstar",{attrs:{score:2*s.rating}})],1):t._e(),e("div",{staticClass:"time"},[t._v(t._s(s.createTime))])]),e("div",{staticClass:"content three-line"},[t._v(t._s(s.comment))])])})),0),t.pageInfo.start<t.count?e("div",{staticClass:"load-more"},[e("a",{staticClass:"load-more-a",on:{click:t.loadMore}},[t._v("点击加载更多")])]):t._e()])},w=[],D={components:{rankstar:n["a"]},name:"movieRecomende",computed:{title:function(){return this.$store.state.title}},created(){},methods:{async getDetail(){let t={};t.mid=this.id,t.start=this.pageInfo.start,t.cnt=this.pageInfo.cnt,Object(c["b"])(t).then(t=>{200===t.code?(this.detailData=t.obj.objs,this.count=t.obj.count,this.pageInfo.start+=t.obj.objs.length):this.$message.error(t.message)})},async loadMore(){let t={};t.mid=this.id,t.start=this.pageInfo.start,t.cnt=this.pageInfo.cnt,Object(c["b"])(t).then(t=>{200===t.code?(this.detailData.push(...t.obj.objs),this.count=t.obj.count,this.pageInfo.start+=t.obj.objs.length):this.$message.error(t.message)})}},data(){return{id:null,count:0,pageInfo:{start:0,cnt:20},detailData:{}}},watch:{"$route.params":{handler(t){this.id=t.id,this.getDetail(t.id)},immediate:!0}}},L=D,y=(s("efca"),Object(v["a"])(L,k,w,!1,null,"30ba398a",null)),O=y.exports,S={name:"detail",components:{movieInfo:f,movieRecomende:j,movieComent:O},data(){return{}}},$=S,M=(s("8503"),Object(v["a"])($,i,a,!1,null,"e71a7b64",null));e["default"]=M.exports},"633b":function(t,e,s){},8503:function(t,e,s){"use strict";s("2fb6")},"86ab":function(t,e,s){"use strict";s("fb49")},"93a5":function(t,e,s){},d653:function(t,e,s){"use strict";s("633b")},dab6:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return o})),s.d(e,"a",(function(){return r}));var i=s("b775");function a(t,e){return Object(i["a"])({url:"/movie/score/"+t+"?uid="+e,method:"get"})}function o(t,e,s){return Object(i["a"])({url:"/movie/rate/"+t,method:"get",params:{uid:e,score:s}})}function r(t){return Object(i["a"])({url:"/user/ratingDistribution/"+t,method:"get"})}},efca:function(t,e,s){"use strict";s("93a5")},fb49:function(t,e,s){},fc91:function(t,e,s){"use strict";s.d(e,"c",(function(){return a})),s.d(e,"e",(function(){return o})),s.d(e,"d",(function(){return r})),s.d(e,"h",(function(){return n})),s.d(e,"a",(function(){return c})),s.d(e,"b",(function(){return l})),s.d(e,"i",(function(){return d})),s.d(e,"g",(function(){return u})),s.d(e,"f",(function(){return h}));var i=s("b775");function a(t){return Object(i["a"])({url:"/movie/detail/"+t,method:"get"})}function o(t){return Object(i["a"])({url:"/movie/movies",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/movieRecommend/movie/"+t,method:"get"})}function n(){return Object(i["a"])({url:"/home/getCarousels",method:"get"})}function c(t){return Object(i["a"])({url:"/movie/articleMovieInfo/"+t,method:"get"})}function l(t){return Object(i["a"])({url:"/movie/comments",method:"get",params:t})}function d(t){return Object(i["a"])({url:"/movie/comment",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/movie/videos/"+t,method:"get"})}function h(t){return Object(i["a"])({url:"/home/sysReco",method:"get",params:t})}}}]);
//# sourceMappingURL=chunk-000d72e9.f7057769.js.map