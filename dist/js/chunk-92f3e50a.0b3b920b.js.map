{"version":3,"sources":["webpack:///./src/views/user/setting.vue?b7da","webpack:///./src/views/user/setting.vue?33a6","webpack:///src/views/user/setting.vue","webpack:///./src/views/user/setting.vue?05bb","webpack:///./src/views/user/setting.vue"],"names":["render","_vm","this","_c","_self","staticStyle","_v","ref","attrs","user","model","value","callback","$$v","$set","expression","status","on","activationEmail","_e","updateInfo","showResetPass","showResetEmail","head","staticClass","header","uploadAction","handleUploadSuccess","slot","resetPassDialogVisible","$event","resetPassDialogClosed","resetPassForm","resetPassFormRules","resetPass","resetEmailDialogVisible","resetEmailDialogClosed","reseEmailForm","reseEmailFormRules","resetEmail","staticRenderFns","validateEmail","rule","Error","reg","test","validatePsw","newPassword","Authentication","config","API_URL","id","username","email","birthday","gender","info","lastLoginTime","oldPassword","confirmPassword","required","message","trigger","validator","then","res","obj","console","log","$router","push","name","query","redirect","currentRoute","fullPath","methods","code","$message","error","success","$refs","resetFields","validate","async","valid","setHead","$store","dispatch","type","component"],"mappings":"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","file":"js/chunk-92f3e50a.0b3b920b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=style&index=0&id=92db5eec&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h3',{staticStyle:{\"letter-spacing\":\"1px\",\"font-weight\":\"400\",\"padding-bottom\":\"20px\"}},[_vm._v(\" 基本设置 \")]),_c('div',[_c('el-form',{ref:\"form\",staticStyle:{\"width\":\"350px\",\"float\":\"left\"},attrs:{\"label-position\":\"top\",\"model\":_vm.user,\"label-width\":\"80px\"}},[_c('el-form-item',{staticStyle:{\"padding\":\"0\"},attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.user.username),callback:function ($$v) {_vm.$set(_vm.user, \"username\", $$v)},expression:\"user.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"性别\"}},[_c('el-radio-group',{model:{value:(_vm.user.gender),callback:function ($$v) {_vm.$set(_vm.user, \"gender\", $$v)},expression:\"user.gender\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"男\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"女\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"出生年月\"}},[_c('el-col',[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"placeholder\":\"选择日期\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.user.birthday),callback:function ($$v) {_vm.$set(_vm.user, \"birthday\", $$v)},expression:\"user.birthday\"}})],1)],1),_c('el-form-item',{staticStyle:{\"padding\":\"0\"},attrs:{\"label\":\"邮箱\"}},[_c('el-input',{attrs:{\"type\":\"email\",\"disabled\":\"\"},model:{value:(_vm.user.email),callback:function ($$v) {_vm.$set(_vm.user, \"email\", $$v)},expression:\"user.email\"}}),(_vm.user.status == 2)?_c('el-link',{on:{\"click\":_vm.activationEmail}},[_vm._v(\"邮箱未激活！点击激活邮箱！\")]):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"个人简介\"}},[_c('el-input',{attrs:{\"rows\":5,\"type\":\"textarea\"},model:{value:(_vm.user.info),callback:function ($$v) {_vm.$set(_vm.user, \"info\", $$v)},expression:\"user.info\"}})],1),_c('el-form-item',{staticStyle:{\"padding\":\"0\"},attrs:{\"label\":\"上次登录时间\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"disabled\":\"\"},model:{value:(_vm.user.lastLoginTime),callback:function ($$v) {_vm.$set(_vm.user, \"lastLoginTime\", $$v)},expression:\"user.lastLoginTime\"}})],1),_c('el-form-item',{staticStyle:{\"padding-top\":\"20px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateInfo}},[_vm._v(\"更新基本信息\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showResetPass}},[_vm._v(\"修改密码\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showResetEmail}},[_vm._v(\"修改邮箱\")])],1)],1),_c('div',[_c('img',{staticStyle:{\"padding-bottom\":\"10px\",\"padding-left\":\"150px\",\"width\":\"150px\",\"height\":\"150px\"},attrs:{\"alt\":\"\",\"src\":_vm.user.head}}),_c('el-upload',{staticClass:\"upload-demo\",staticStyle:{\"padding-left\":\"500px\",\"letter-spacing\":\"1px\"},attrs:{\"accept\":\".png,.jpg\",\"headers\":_vm.header,\"action\":_vm.uploadAction,\"on-success\":_vm.handleUploadSuccess,\"limit\":1}},[_c('el-button',{staticStyle:{\"width\":\"150px\"},attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_c('i',{staticClass:\"el-icon-upload2\"}),_vm._v(\" 点击上传 \")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改密码\",\"visible\":_vm.resetPassDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.resetPassDialogVisible=$event},\"close\":_vm.resetPassDialogClosed}},[_c('el-form',{ref:\"resetPassForm\",attrs:{\"model\":_vm.resetPassForm,\"rules\":_vm.resetPassFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"旧密码\",\"prop\":\"oldPassword\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"type\":\"password\"},model:{value:(_vm.resetPassForm.oldPassword),callback:function ($$v) {_vm.$set(_vm.resetPassForm, \"oldPassword\", $$v)},expression:\"resetPassForm.oldPassword\"}})],1),_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"newPassword\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"type\":\"password\"},model:{value:(_vm.resetPassForm.newPassword),callback:function ($$v) {_vm.$set(_vm.resetPassForm, \"newPassword\", $$v)},expression:\"resetPassForm.newPassword\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"confirmPassword\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"type\":\"password\"},model:{value:(_vm.resetPassForm.confirmPassword),callback:function ($$v) {_vm.$set(_vm.resetPassForm, \"confirmPassword\", $$v)},expression:\"resetPassForm.confirmPassword\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.resetPassDialogClosed}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.resetPass}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改邮箱\",\"visible\":_vm.resetEmailDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.resetEmailDialogVisible=$event},\"close\":_vm.resetEmailDialogClosed}},[_c('el-form',{ref:\"resetPassForm\",attrs:{\"model\":_vm.reseEmailForm,\"rules\":_vm.reseEmailFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"新邮箱\",\"prop\":\"email\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"type\":\"text\"},model:{value:(_vm.reseEmailForm.email),callback:function ($$v) {_vm.$set(_vm.reseEmailForm, \"email\", $$v)},expression:\"reseEmailForm.email\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.resetEmailDialogClosed}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.resetEmail}},[_vm._v(\"确 定\")])],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h3 style=\"letter-spacing: 1px; font-weight: 400; padding-bottom: 20px\">\r\n      基本设置\r\n    </h3>\r\n\r\n    <div>\r\n      <el-form\r\n        style=\"width: 350px; float: left\"\r\n        label-position=\"top\"\r\n        ref=\"form\"\r\n        :model=\"user\"\r\n        label-width=\"80px\"\r\n      >\r\n        <el-form-item style=\"padding: 0\" label=\"用户名\">\r\n          <el-input v-model=\"user.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\">\r\n          <el-radio-group v-model=\"user.gender\">\r\n            <el-radio :label=\"1\">男</el-radio>\r\n            <el-radio :label=\"0\">女</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"出生年月\">\r\n          <el-col>\r\n            <el-date-picker\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n              v-model=\"user.birthday\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              style=\"width: 100%\"\r\n            />\r\n          </el-col>\r\n        </el-form-item>\r\n        <el-form-item style=\"padding: 0\" label=\"邮箱\">\r\n          <el-input type=\"email\" v-model=\"user.email\" disabled></el-input>\r\n          <el-link v-if=\"user.status == 2\" @click=\"activationEmail\"\r\n            >邮箱未激活！点击激活邮箱！</el-link\r\n          >\r\n        </el-form-item>\r\n        <el-form-item label=\"个人简介\">\r\n          <el-input :rows=\"5\" type=\"textarea\" v-model=\"user.info\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item style=\"padding: 0\" label=\"上次登录时间\">\r\n          <el-input\r\n            type=\"text\"\r\n            v-model=\"user.lastLoginTime\"\r\n            disabled\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item style=\"padding-top: 20px\">\r\n          <el-button type=\"primary\" @click=\"updateInfo\">更新基本信息</el-button>\r\n          <el-button type=\"primary\" @click=\"showResetPass\">修改密码</el-button>\r\n          <el-button type=\"primary\" @click=\"showResetEmail\">修改邮箱</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div>\r\n        <img\r\n          style=\"\r\n            padding-bottom: 10px;\r\n            padding-left: 150px;\r\n            width: 150px;\r\n            height: 150px;\r\n          \"\r\n          alt=\"\"\r\n          :src=\"user.head\"\r\n        />\r\n        <el-upload\r\n          style=\"padding-left: 500px; letter-spacing: 1px\"\r\n          class=\"upload-demo\"\r\n          accept=\".png,.jpg\"\r\n          :headers=\"header\"\r\n          :action=\"uploadAction\"\r\n          :on-success=\"handleUploadSuccess\"\r\n          :limit=\"1\"\r\n        >\r\n          <el-button style=\"width: 150px\" size=\"small\" type=\"primary\">\r\n            <i class=\"el-icon-upload2\"></i> 点击上传\r\n          </el-button>\r\n          <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件</div>\r\n        </el-upload>\r\n      </div>\r\n      <!-- 修改密码的对话框 -->\r\n      <el-dialog\r\n        title=\"修改密码\"\r\n        :visible.sync=\"resetPassDialogVisible\"\r\n        width=\"50%\"\r\n        @close=\"resetPassDialogClosed\"\r\n      >\r\n        <!-- 修改密码的表单 -->\r\n        <el-form\r\n          ref=\"resetPassForm\"\r\n          :model=\"resetPassForm\"\r\n          :rules=\"resetPassFormRules\"\r\n          label-width=\"100px\"\r\n        >\r\n          <el-form-item label=\"旧密码\" prop=\"oldPassword\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"resetPassForm.oldPassword\"\r\n              style=\"width: 80%\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"resetPassForm.newPassword\"\r\n              style=\"width: 80%\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\r\n            <el-input\r\n              type=\"password\"\r\n              v-model=\"resetPassForm.confirmPassword\"\r\n              style=\"width: 80%\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <!-- 底部按钮区域 -->\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"resetPassDialogClosed\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"resetPass\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n      <!-- 修改邮箱对话框 -->\r\n      <el-dialog\r\n        title=\"修改邮箱\"\r\n        :visible.sync=\"resetEmailDialogVisible\"\r\n        width=\"50%\"\r\n        @close=\"resetEmailDialogClosed\"\r\n      >\r\n        <!-- 修改密码的表单 -->\r\n        <el-form\r\n          ref=\"resetPassForm\"\r\n          :model=\"reseEmailForm\"\r\n          :rules=\"reseEmailFormRules\"\r\n          label-width=\"100px\"\r\n        >\r\n          <el-form-item label=\"新邮箱\" prop=\"email\">\r\n            <el-input\r\n              type=\"text\"\r\n              v-model=\"reseEmailForm.email\"\r\n              style=\"width: 80%\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <!-- 底部按钮区域 -->\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"resetEmailDialogClosed\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"resetEmail\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { findById, updateUser, updateEmail, updatePass, sendActivationEmail } from \"@/api/user\";\r\nimport config from \"@/config\";\r\nimport { getId } from \"@/utils/auth\";\r\nimport { getToken } from \"@/utils/auth\";\r\nimport header from \"@/components/layout/Header\";\r\n\r\nexport default {\r\n  data() {\r\n    const validateEmail = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请正确填写邮箱\"));\r\n      } else {\r\n        if (value !== \"\") {\r\n          var reg =\r\n            /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n          if (!reg.test(value)) {\r\n            callback(new Error(\"请输入有效的邮箱\"));\r\n          }\r\n        }\r\n        callback();\r\n      }\r\n    };\r\n    let validatePsw = (rule, value, callback) => {\r\n      if (value !== this.resetPassForm.newPassword) {\r\n        callback(new Error(\"两次输入密码不一致!\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      header: {\r\n        Authentication: getToken(),\r\n      },\r\n      uploadAction: config.API_URL + \"/upload/changeHead\",\r\n      user: {\r\n        id: \"\",\r\n        username: \"\",\r\n        email: \"\",\r\n        birthday: \"\",\r\n        gender: \"\",\r\n        info: \"\",\r\n        head: \"\",\r\n        lastLoginTime: \"\",\r\n        status: \"\",\r\n      },\r\n      resetPassDialogVisible: false,\r\n      resetEmailDialogVisible: false,\r\n      resetPassForm: {\r\n        oldPassword: \"\",\r\n        newPassword: \"\",\r\n        confirmPassword: \"\",\r\n      },\r\n      reseEmailForm: {\r\n        email: \"\",\r\n      },\r\n      resetPassFormRules: {\r\n        oldPassword: [\r\n          { required: true, message: \"请输入旧密码\", trigger: \"blur\" },\r\n        ],\r\n        newPassword: [\r\n          { required: true, message: \"请输入新密码\", trigger: \"blur\" },\r\n        ],\r\n        confirmPassword: [\r\n          { required: true, message: \"请再次输入密码\", trigger: \"blur\" },\r\n          { validator: validatePsw, trigger: \"blur\" },\r\n        ],\r\n      },\r\n      reseEmailFormRules: {\r\n        email: [{ required: true, trigger: \"blur\", validator: validateEmail }],\r\n      },\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    if (getId() !== null) {\r\n      findById(getId()).then((res) => {\r\n        const { obj } = res;\r\n        console.log(obj)\r\n        this.user = obj;\r\n      });\r\n    } else {\r\n      this.$router.push({\r\n          name: \"login\",\r\n          query: { redirect: this.$router.currentRoute.fullPath },\r\n        });\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    updateInfo() {\r\n      updateUser(this.user).then((res) => {\r\n        if (res.code !== 200) {\r\n          this.$message.error(res.message);\r\n        } else {\r\n          this.$message.success(\"更新信息成功\");\r\n          console.log(res.obj)\r\n          this.user = res.obj;\r\n        }\r\n      });\r\n    },\r\n    async showResetPass() {\r\n      // 再展示对话框\r\n      this.resetPassDialogVisible = true;\r\n    },\r\n    async showResetEmail() {\r\n      this.resetEmailDialogVisible = true;\r\n    },\r\n    // 监听添加分类对话框的关闭事件，重置表单数据\r\n    resetPassDialogClosed() {\r\n      this.$refs.resetPassForm.resetFields();\r\n      this.resetPassDialogVisible = false;\r\n    },\r\n    // 监听添加分类对话框的关闭事件，重置表单数据\r\n    resetEmailDialogClosed() {\r\n      this.$refs.resetPassForm.resetFields();\r\n      this.resetEmailDialogVisible = false;\r\n    },\r\n\r\n    resetEmail() {\r\n      this.$refs.reseEmailForm.validate(async (valid) => {\r\n        if (!valid) {\r\n          return 0;\r\n        } else {\r\n          await updateEmail(this.reseEmailForm).then((res) => {\r\n            if (res.code === 200) {\r\n              this.$message.success(\"修改成功！\");\r\n              this.email = this.reseEmailForm.email;\r\n              this.resetPassDialogVisible = false;\r\n            } else {\r\n              this.$message.error(res.message);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    resetPass() {\r\n      this.$refs.resetPassForm.validate(async (valid) => {\r\n        if (!valid) {\r\n          return 0;\r\n        } else {\r\n          await updatePass(this.resetPassForm).then((res) => {\r\n            if (res.code === 200) {\r\n              this.$message.success(\"修改成功！\");\r\n              this.resetPassDialogVisible = false;\r\n            } else {\r\n              this.$message.error(res.message);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    activationEmail() {\r\n      sendActivationEmail().then((res) => {\r\n        if (res.code !== 200) {\r\n          this.$message.error(res.message);\r\n        } else {\r\n          this.$message.success(\"激活邮件已发送，请注意查收！\");\r\n        }\r\n      });\r\n    },\r\n\r\n    handleUploadSuccess(res) {\r\n      if (res.code === 200) {\r\n        this.user.head = res.obj;\r\n        header.methods.setHead();\r\n        this.$store.dispatch(\"user/setHead\", res.obj);\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"头像上传成功!\",\r\n        });\r\n      } else {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: res.message,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-form--label-top .el-form-item__label {\r\n  padding: 0;\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 5px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./setting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./setting.vue?vue&type=template&id=92db5eec&scoped=true&\"\nimport script from \"./setting.vue?vue&type=script&lang=js&\"\nexport * from \"./setting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./setting.vue?vue&type=style&index=0&id=92db5eec&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"92db5eec\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}